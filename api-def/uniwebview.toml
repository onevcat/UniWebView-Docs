title = "UniWebView"
file = "uniwebview"

[[Properties]]
name = "Frame"
returnType = "Rect"
hasSetter = true
summary = """Get or Set the frame of current web view. The value is based on current `Screen.width` and `Screen.height`.
The first two values of `Rect` is `x` and `y` position and the followed two `width` and `height`. The original point is top left corner:

![](https://docs.unity3d.com/StaticFiles/ScriptRefImages/RectXY.svg)
"""
example = """
```csharp
// Make the web view full screen:
webView.Frame = new Rect(0, 0, Screen.width, Screen.height);

// Make the web view center in the screen with size 500x500:
var side = 500;
var x = (Screen.width - side) / 2.0f;
var y = (Screen.height - side) / 2.0f;
webView.Frame = new Rect(x, y, side, side);
```
"""
notice = "`Frame` will be ignored if `ReferenceRectTransform` is set."

[[Properties]]
name = "ReferenceRectTransform"
returnType = "RectTransform"
hasSetter = true
summary = """
A reference rect transform which the web view should change its position and size to.

Set it to a Unity UI element (which contains a `RectTransform`) under a canvas to determine 
the web view frame by a certain UI element. 

By using this, you could get benefit from [Multiple Resolutions UI](https://docs.unity3d.com/Manual/HOWTO-UIMultiResolution.html).
"""
example = """
```csharp
// Some panel
RectTransform panel = ...

// Set the web view position and size to match panel
webView.ReferenceRectTransform = panel;
```
"""

[[Properties]]
name = "Url"
returnType = "string"
hasSetter = false
summary = "The url of current loaded web page."
example = """
```csharp
webView.Load("https://example.com/");

// Some time later or in "OnPageFinished":
print(webView.Url);
// => "https://example.com/"
```
"""

[[Properties]]
name = "CanGoBack"
returnType = "bool"
hasSetter = false
summary = "Gets whether there is a back page in the back-forward list that can be navigated to."

[[Properties]]
name = "CanGoForward"
returnType = "bool"
hasSetter = false
summary = "Gets whether there is a forward page in the back-forward list that can be navigated to."

[[Properties]]
name = "BackgroundColor"
returnType = "Color"
hasSetter = true
summary = """
Gets or sets the background color of web view. The default value if `Color.white`.

This only sets the background color of the content view of the web view. Normally, the background
color will be hidden by the web page background. If you want to make the web view background visible,
you need to make the web page it transparent by adding some necessary style to it.

This property only change the web view background. 
If you want to make the whole web view transparent, use `Alpha` instead.
"""
example = """
```csharp
// Set the web view background (under the web page) to red.
webView.BackgroundColor = Color.red;
```
"""

[[Properties]]
name = "Alpha"
returnType = "float"
hasSetter = true
summary = """
Gets or sets the alpha value of the whole web view.

You could make the game scene behind web view visible to make the web view transparent.

Default is `1.0f`, which means totally opaque. Set it to `0.0f` will make the web view totally transparent.
"""
example = """
```csharp
// Set the web view half transparent.
webView.Alpha = 0.5f;
```
"""

[[Methods]]
name = "Load"
syntax = "Load(string url)"
returnType = "void"
summary = "Load a url in current web view."
example = """
```csharp
webView.Load("https://example.com");
```
"""
[[Methods.parameters]]
name = "url"
type = "string"
summary = "The url to be loaded. This url should start with `http://` or `https://` scheme. You could even load a non-ascii url text if it is valid."
[[Methods.parameters]]
name = "skipEncoding"
type = "bool"
summary = "Whether UniWebView should skip encoding the url or not. If set to `false`, UniWebView will try to encode the url parameter before loading it. Otherwise, your original url string will be used as the url if it is valid. Default is `false`."

[[Methods]]
name = "LoadHTMLString"
syntax = "LoadHTMLString(string htmlString, string baseUrl)"
returnType = "void"
summary = "Load an HTML string in current web view."
example = """
```csharp
webView.LoadHTMLString("<p>Hello World</p>", "https://domain.com");
```
"""
[[Methods.parameters]]
name = "htmlString"
type = "string"
summary = "The HTML string to use as the contents of the webpage."
[[Methods.parameters]]
name = "baseUrl"
type = "string"
summary = "The url to use as the page's base url."
[[Methods.parameters]]
name = "skipEncoding"
type = "bool"
summary = "Whether UniWebView should skip encoding the baseUrl or not. If set to `false`, UniWebView will try to encode the baseUrl parameter before using it. Otherwise, your original url string will be used as the baseUrl if it is valid. Default is `false`."

[[Methods]]
name = "Reload"
syntax = "Reload()"
returnType = "void"
summary = "Reloads the current page."

[[Methods]]
name = "Stop"
syntax = "Stop()"
returnType = "void"
summary = "Stops loading all resources on the current page."

[[Methods]]
name = "GoBack"
syntax = "GoBack()"
returnType = "void"
summary = "Navigates to the back item in the back-forward list."
example = """
```csharp
if (webView.CanGoBack) {
    webView.GoBack();
}
```
"""

[[Methods]]
name = "GoForward"
syntax = "GoForward()"
returnType = "void"
summary = "Navigates to the forward item in the back-forward list."
example = """
```csharp
if (webView.CanGoForward) {
    webView.GoForward();
}
```
"""

[[Methods]]
name = "SetOpenLinksInExternalBrowser"
syntax = "SetOpenLinksInExternalBrowser(bool flag)"
returnType = "void"
summary = """
Sets whether the link clicking in the web view should open the page in an external browser.

By default, when user clicks a link, it will be opened in the same web view. After setting this with `true`, 
the user will be navigated to an external native browser.

On iOS, the mobile Safari; on Android, the default browser like Chrome; on macOS Editor, the default browser of your system will be used.
"""
example = """
```csharp
// You may want to set it in OnPageFinished event, 
// otherwise the original page will be also opened externally
webView.OnPageFinished += (view, statusCode, url) => {
    webView.SetOpenLinksInExternalBrowser(true);
};
```
"""
[[Methods.parameters]]
name = "flag"
type = "bool"
summary = "The flag indicates whether a link should be opened externally."

[[Methods]]
name = "Show"
syntax = "Show(bool fade, UniWebViewTransitionEdge edge, float duration, Action completionHandler)"
returnType = "bool"
returnValue = "A `bool` value indicates whether the showing operation started."
summary = """Sets the web view visible on screen.

If you pass `false` and `UniWebViewTransitionEdge.None` to the first two parameters, it means no animation 
will be applied when showing. So the `duration` parameter will not be taken into account. Otherwise, when 
either or both `fade` and `edge` set, the showing operation will be animated.

Regardless of there is an animation or not, the `completionHandler` will be called if not `null` when the web view
showing finishes.
"""
example = """
```csharp
// Show the web view without animation
webView.Show();

// Show the web view with a fade animation
webView.Show(true);

// Show the web view with a modal presenting animation from screen bottom
webView.Show(false, UniWebViewTransitionEdge.Bottom);

// Print a message after the web view shown with animation
webView.Show(true, UniWebViewTransitionEdge.Top, 0.25f, ()=> {
    print("Show transition finished!");
});
```
"""
[[Methods.parameters]]
name = "fade"
type = "bool"
summary = "Whether show with a fade in animation. Default is `false`."
[[Methods.parameters]]
name = "edge"
type = "UniWebViewTransitionEdge"
summary = "The edge from which the web view showing. It simulates a modal effect when showing a web view. Default is `UniWebViewTransitionEdge.None`."
[[Methods.parameters]]
name = "duration"
type = "float"
summary = "Duration of showing animation. Default is `0.4f`."
[[Methods.parameters]]
name = "completionHandler"
type = "Action"
summary = "Completion handler which will be called when showing finishes. Default is `null`."

[[Methods]]
name = "Hide"
syntax = "Hide(bool fade, UniWebViewTransitionEdge edge, float duration, Action completionHandler)"
returnType = "bool"
returnValue = "A `bool` value indicates whether the hiding operation started."
summary = """Sets the web view invisible from screen.

If you pass `false` and `UniWebViewTransitionEdge.None` to the first two parameters, it means no animation 
will be applied when hiding. So the `duration` parameter will not be taken into account. Otherwise, when 
either or both `fade` and `edge` set, the hiding operation will be animated.

Regardless there is an animation or not, the `completionHandler` will be called if not `null` when the web view
hiding finishes.
"""
notice = """Hiding the web view does not destroy or release it. You could always call `Show` on the web view again to make it visible.

To release a web view and its resource, pass the web view component as the parameter of `Destroy`.
"""
example = """
```csharp
// Hide the web view without animation
webView.Hide();

// Hide the web view with a fade animation
webView.Hide(true);

// Hide the web view with a modal presenting animation from screen bottom
webView.Hide(false, UniWebViewTransitionEdge.Bottom);

// Print a message after the web view hidden with animation
webView.Hide(true, UniWebViewTransitionEdge.Top, 0.25f, ()=> {
    print("Hide transition finished!");
});
```
"""
[[Methods.parameters]]
name = "fade"
type = "bool"
summary = "Whether hide with a fade in animation. Default is `false`."
[[Methods.parameters]]
name = "edge"
type = "UniWebViewTransitionEdge"
summary = "The edge from which the web view hiding. It simulates a modal effect when hiding a web view. Default is `UniWebViewTransitionEdge.None`."
[[Methods.parameters]]
name = "duration"
type = "float"
summary = "Duration of hiding animation. Default is `0.4f`."
[[Methods.parameters]]
name = "completionHandler"
type = "Action"
summary = "Completion handler which will be called when hiding finishes. Default is `null`."

[[Methods]]
name = "AnimateTo"
syntax = "AnimateTo(Rect frame, float duration, float delay, Action completionHandler)"
returnType = "bool"
returnValue = "A `bool` value indicates whether the animation started."
summary = "Animates the web view from current `Frame` (position and size) to another `Frame` (position and size) within `duration`."
example = """
```csharp
// Animate current web view to cover half of the screen.
var halfScreen = new Rect(0, 0, Screen.width, Screen.height / 2);
webView.AnimateTo(halfScreen, 0.4f, 0.1f, () => {
    print("Aniamtion finished!");
});
```
"""
[[Methods.parameters]]
name = "frame"
type = "Rect"
summary = "The new `Frame` which the web view should be."
[[Methods.parameters]]
name = "duration"
type = "float"
summary = "Duration of the animation."
[[Methods.parameters]]
name = "delay"
type = "float"
summary = "Delay before the animation begins. Default is `0.0f`, which means the animation will start immediately."
[[Methods.parameters]]
name = "completionHandler"
type = "Action"
summary = "Completion handler which will be called when animation finishes. Default is `null`."

[[Methods]]
name = "UpdateFrame"
syntax = "UpdateFrame()"
returnType = "void"
summary = """
Update and set current frame of web view to match the setting.

This is useful if the `referenceRectTransform` is changed and you need to sync the frame change
to the web view. This method follows the frame determining rules.
"""
example = """
```csharp
// In a UIBehavior script:
// Called when associated `rectTransform` is changed.
void OnRectTransformDimensionsChange() {
    // This will update web view's frame to match the reference rect transform if set.
    webView.UpdateFrame();
}
```
"""

[[Methods]]
name = "AddJavaScript"
syntax = "AddJavaScript(string jsString, Action<UniWebViewNativeResultPayload> completionHandler)"
returnType = "void"
summary = """
Adds a JavaScript to current page. Normally, you add a JavaScript function or variable with this method.

The input `jsString` will be executed by current web view. If succeeded, the input JavaScript code will "inject" 
to the web view and a `UniWebViewNativeResultPayload` with `resultCode` being "0" will passed to the `completionHandler`.
"""
example = """
```csharp
webView.AddJavaScript("function add() { return 1 + 2; }", (payload)=>{
    if (result.resultCode.Equal("0")) {
        ptint("JavaScript adding finished without problem.");
    }
});
```
"""
[[Methods.parameters]]
name = "jsString"
type = "string"
summary = "The JavaScript code to add. It should be a valid JavaScript statement string."
[[Methods.parameters]]
name = "completionHandler"
type = "Action<UniWebViewNativeResultPayload>"
summary = "Called when adding JavaScript operation finishes. Default is `null`. If everything goes fine and the `jsString` added to current web view, `resultCode` would be \"0\""

[[Methods]]
name = "EvaluateJavaScript"
syntax = "EvaluateJavaScript(string jsString, Action<UniWebViewNativeResultPayload> completionHandler)"
returnType = "void"
summary = """Evaluates a JavaScript string on current page. Normally you execute a certain JavaScript function or get a variable by this method.

The input `jsString` will be executed by current web view. Executing result will be sent back to you in the `completionHandler`. You could access the `data` member of `UniWebViewNativeResultPayload` passed in to get the JavaScript function return value.
"""
example = """
```csharp
// Pop up an alert from web view.
webView.EvaluateJavaScript("alert('Alert!');", (payload)=>{
    print(payload.resultCode); // => "0"
    print(payload.data); // => ""
});

// Adding two numbers by a JavaScript function.
webView.AddJavaScript("function add(a, b) { return a + b; }", completionHandler: _ => {
    webView.EvaluateJavaScript("add(4, 5);", completionHandler: (payload) => {
        print(payload.resultCode); // => "0"
        print(payload.data);  // => "9"
    });
});

// Call a JavaScript function not existing.
webView.EvaluateJavaScript("functionNotExisting()", completionHandler: (payload) => {
    print(payload.resultCode);
    // a non-zero value which indicates JavaScript error code.
    // eg. "4" on iOS.
});
```
"""
[[Methods.parameters]]
name = "jsString"
type = "string"
summary = "The JavaScript string to evaluate."
[[Methods.parameters]]
name = "completionHandler"
type = "Action<UniWebViewNativeResultPayload>"
summary = "Called when evaluating JavaScript operation finishes. Default is `null`. If everything goes find, the `resultCode` would be \"0\" and the return value of invoked JavaScript is contained in `data`."

[[Methods]]
name = "AddUrlScheme"
syntax = "AddUrlScheme(string scheme)"
returnType = "void"
summary = "Adds a url scheme to UniWebView message system interpreter. All following url navigation to this scheme will be sent as a message to UniWebView instead."
example = """
```csharp
// Add "myscheme" as a UniWebView message scheme.
webView.AddUrlScheme("myscheme");

// A link like "myscheme://action" will be treated as a message and raise the `OnMessageReceived` event from now.
```
"""
[[Methods.parameters]]
name = "scheme"
type = "string"
summary = "The url scheme to add. It should not contain \"://\" part. You could even add \"http\" and/or \"https\" to prevent all resource loading on the page. \"uniwebview\" is added by default. Nothing will happen if you try to add a dulplicated scheme."

[[Methods]]
name = "RemoveUrlScheme"
syntax = "RemoveUrlScheme(string scheme)"
returnType = "void"
summary = "Removes a url scheme from UniWebView message system interpreter."
example = """
```csharp
webView.RemoveUrlScheme("myscheme");
```
"""
[[Methods.parameters]]
name = "scheme"
type = "string"
summary = "The url scheme to remove. Nothing will happen if the scheme is not in the message system."

[[Methods]]
name = "AddSslExceptionDomain"
syntax = "AddSslExceptionDomain(string domain)"
returnType = "void"
summary = """
Adds a domain to the SSL checking white list.

If you are trying to access a web site with untrusted or expired certification, 
the web view will prevent its loading. If you could confirm that this site is trusted,
you can add the domain as an SSL exception, so you could visit it.
"""
notice = "We strongly suggest you to upgrade your site certification to a trusted one. It would be dangerous to add a site as SSL exception and your user might be exposed to the risk of Man-in-the-middle attack. You should know exactly what you will do before adding a domain to white list."
example = """
```csharp
// This loading will fail since the certification is a self signed one and not trusted.
webView.Load("https://self-signed.badssl.com/"); 

// Add "self-signed.badssl.com" as trusted.
webView.AddSslExceptionDomain("self-signed.badssl.com");
// This page should load now.
webView.Load("https://self-signed.badssl.com/"); 
```
"""
[[Methods.parameters]]
name = "domain"
type = "string"
summary = "The domain to add. It should not contain any scheme or path part in url."

[[Methods]]
name = "RemoveSslExceptionDomain"
syntax = "RemoveSslExceptionDomain(string domain)"
returnType = "void"
summary = "Removes a domain from the SSL checking white list."
example = """
```csharp
webView.RemoveSslExceptionDomain("self-signed.badssl.com");
```
"""
[[Methods.parameters]]
name = "domain"
type = "string"
summary = "The domain to remove. It should not contain any scheme or path part in url."

[[Methods]]
name = "SetHeaderField"
syntax = "SetHeaderField(string key, string value)"
returnType = "void"
summary = """
Sets a customized header field for web view requests.

The header field will be used for all subsequence reqeust. 
Pass `null` as value to unset a header field.

Some reserved headers like user agent are not be able to override by setting here, 
use the `SetUserAgent` method for them instead.
"""
example = """
```csharp
// Set "MyToken" field to "123abc" in a web view. It will be used for all following requests.
webView.SetHeaderField("MyToken", "123abc");

// Unset it
webView.SetHeaderField("MyToken", null);
```
"""
[[Methods.parameters]]
name = "key"
type = "string"
summary = "The key of customized header field."
[[Methods.parameters]]
name = "value"
type = "string"
summary = "The value of customized header field. `null` if you want to unset the field."

[[Methods]]
name = "SetUserAgent"
syntax = "SetUserAgent(string agent)"
returnType = "void"
summary = "Sets the user agent used in the web view. If the string is null or empty, the system default value will be used."
example = """
```csharp
// Set the user agent string sent in request header.
webView.SetUserAgent("My-Amazion-App/1.0.0 (iOS 10.3, iPhone 7)");

// => In request header:
// User-Agent = "My-Amazion-App/1.0.0 (iOS 10.3, iPhone 7)"
```
"""
[[Methods.parameters]]
name = "agent"
type = "string"
summary = "The new user agent string to use."

[[Methods]]
name = "GetUserAgent"
syntax = "GetUserAgent()"
returnType = "string"
returnValue = "The user agent string in use."
summary = "Gets the user agent string currently used in web view. If a customized user agent is not set, the default user agent in current platform will be returned."
example = """
```csharp
// Gets the default user agent.
webView.GetUserAgent()
// => "Mozilla/5.0 (iPhone; CPU iPhone OS 10_2_1 like Mac OS X) AppleWebKit/602.4.6 ..."
// This value varies in different platforms.

// Sets a user agent and then get it.
webView.SetUserAgent("My-Amazion-App/1.0.0 (iOS 10.3, iPhone 7)");
webView.GetUserAgent()
// => "My-Amazion-App/1.0.0 (iOS 10.3, iPhone 7)"
```
"""

[[Methods]]
name = "SetAllowAutoPlay"
syntax = "SetAllowAutoPlay(bool flag)"
returnType = "void"

summary = """
Set allow auto play for current web view. By default, 
users need to touch the play button to start playing a media resource.

By setting this to `true`, you could start the playing automatically through
corresponding media [tag attributes](https://www.w3schools.com/tags/att_video_autoplay.asp).
"""
notice = "You need to set it before creating a web view. Existing web views are not affected."
example = """
```csharp
UniWebView.SetAllowAutoPlay(true);

// Create a new web view.
var webView = gameObject.AddComponent<UniWebView>();

// Now load and open a page which contains auto-started video to try
webView.Load("https://www.w3schools.com/tags/tryit.asp?filename=tryhtml5_video_autoplay");
webView.Show();
```
"""

[[Methods.badges]]
name = "static"
color = "blue"

[[Methods.parameters]]
name = "flag"
type = "bool"
summary = "A flag indicates whether autoplaying of media is allowed or not."

[[Methods]]
name = "SetAllowInlinePlay"
syntax = "SetAllowInlinePlay(bool flag)"
returnType = "void"
summary = """
Set allow inline play for current web view. By default, on iOS, the video 
can only be played in a new full screen view.

By setting this to `true`, you could play a video inline the page, instead of opening 
a new full screen window.

This only works for iOS and macOS Editor. 
On Android, you could play videos inline by default and calling this method does nothing.
"""
notice = "You need to set it before creating a web view. Existing web views are not affected."
example = """
```csharp
UniWebView.SetAllowInlinePlay(true);

// Create a new web view.
var webView = gameObject.AddComponent<UniWebView>();

// Now load and open a page which contains auto-started video to try
webView.Load("https://example.com/inline-video");
webView.Show();
```
"""
[[Methods.badges]]
name = "static"
color = "blue"
[[Methods.badges]]
name = "iOS"
color = "orange"
[[Methods.parameters]]
name = "flag"
type = "bool"
summary = "A flag indicates whether inline playing of media is allowed or not."

[[Methods]]
name = "SetJavaScriptEnabled"
syntax = "SetJavaScriptEnabled(bool enabled)"
returnType = "void"
summary = """
Sets whether JavaScript should be enabled in current web view. Default is enabled.

For a modern page, you may always want JavaScript enabled. However, if you could confirm that you are
not using any JavaScript in your page, you could turn it off to get better performance and safety.
"""
notice = "You need to set it before creating a web view. Existing web views are not affected."
example = """
```csharp
// Disable JavaScript in web views created later.
UniWebView.SetJavaScriptEnabled(false);

// JavaScript is disabled in this web view.
var webView = gameObject.AddComponent<UniWebView>();
```
"""
[[Methods.badges]]
name = "static"
color = "blue"
[[Methods.parameters]]
name = "enabled"
type = "bool"
summary = "Whether JavaScript should be enabled."

[[Methods]]
name = "SetAllowJavaScriptOpenWindow"
syntax = "SetAllowJavaScriptOpenWindow(bool flag)"
returnType = "void"
summary = "Sets whether JavaScript can open windows without user interaction.\n\nBy setting this to `true`, an automatically JavaScript navigation will be allowed in the web view."
example = """
```csharp
// Allow JavaScript open window automatically.
UniWebView.SetAllowJavaScriptOpenWindow(true);

var webView = gameObject.AddComponent<UniWebView>();

// Now, the following JavaScript code could navigate to 
// "example.com" without user interaction in `webView`.
setTimeout(function() {
    window.location.href = 'https://example.com';
}, 300);
```
"""
[[Methods.badges]]
name = "static"
color = "blue"
[[Methods.parameters]]
name = "flag"
type = "bool"
summary = "Whether JavaScript could open window automatically."

[[Methods]]
name = "CleanCache"
syntax = "CleanCache()"
returnType = "void"
summary = "Clean web view cache. This removes cached local data of web view.\n\nIf you need to clear all cookies, use `ClearCookies` instead."

[[Methods]]
name = "ClearCookies"
syntax = "ClearCookies()"
returnType = "void"
summary = "Clear all cookies from web views."
notice = "This will clear cookies from all domains in the web view and previous. If you only need to remove cookies from a certain domain, use `SetCookie` instead."
example = """
```csharp
UniWebView.ClearCookies();
```
"""
[[Methods.badges]]
name = "static"
color = "blue"

[[Methods]]
name = "SetCookie"
syntax = "SetCookie(string url, string cookie)"
returnType = "void"
summary = """
Sets a cookie for a certain url.

The `cookie` string supports all available cookie properties as well as multiple cookies. See 

UniWebView respect the server cookie header by default. Generally, you do not need to set the 
cookie from client manually. However, if you have to pass your server a manually set cookie, 
use this method.
"""
example = """
```csharp
// Set a cookie "testCookie=1" to current url/domain.
UniWebView.SetCookie(webView.Url, "testCookie=1");

// Set a full properties specified cookie.
UniWebView.SetCookie("https://example.com", "sessionToken=abc123; Expires=Wed, 09 Jun 2021 10:18:14 GMT");
```
"""
[[Methods.badges]]
name = "static"
color = "blue"
[[Methods.parameters]]
name = "url"
type = "string"
summary = "The url to which cookie will be set."
[[Methods.parameters]]
name = "cookie"
type = "string"
summary = "The cookie string to set. Need more information on cookie? See the [HTTP cookie](https://en.wikipedia.org/wiki/HTTP_cookie) page."
[[Methods.parameters]]
name = "skipEncoding"
type = "bool"
summary = "Whether UniWebView should skip encoding the url or not. If set to `false`, UniWebView will try to encode the url parameter before using it. Otherwise, your original url string will be used to set the cookie if it is valid. Default is `false`."

[[Methods]]
name = "GetCookie"
syntax = "GetCookie(string url, string key)"
returnType = "string"
returnValue = "Value of the target cookie under url."
summary = "Gets the cookie value under a url and key."
example = """
```csharp
UniWebView.GetCookie("https://example.com", "testCookie");
// => The corresponding cookie value. Or "" if there is no such cookie.
```
"""
[[Methods.badges]]
name = "static"
color = "blue"
[[Methods.parameters]]
name = "url"
type = "string"
summary = "The url (domain) where the target cookie is."
[[Methods.parameters]]
name = "key"
type = "string"
summary = "The key for target cookie value."
[[Methods.parameters]]
name = "skipEncoding"
type = "bool"
summary = "Whether UniWebView should skip encoding the url or not. If set to `false`, UniWebView will try to encode the url parameter before using it. Otherwise, your original url string will be used to get the cookie if it is valid. Default is `false`."

[[Methods]]
name = "SetShowSpinnerWhileLoading"
syntax = "SetShowSpinnerWhileLoading(bool flag)"
returnType = "void"
summary = """
Sets whether to show a loading indicator while the loading is in progress.
"""
[[Methods.parameters]]
name = "flag"
type = "bool"
summary = "Whether an indicator should show."

[[Methods]]
name = "SetSpinnerText"
syntax = "SetSpinnerText(string text)"
returnType = "void"
summary = "Sets the text displayed in the loading indicator, if `SetShowSpinnerWhileLoading` is set to `true`."
[[Methods.parameters]]
name = "text"
type = "string"
summary = "The text to display while loading indicator visible. Default is \"Loading...\""

[[Methods]]
name = "SetHorizontalScrollBarEnabled"
syntax = "SetHorizontalScrollBarEnabled(bool enabled)"
returnType = "void"
summary = """
Sets whether the horizontal scroll bar should show when the web content beyonds web view bounds.

This only works on mobile platforms. It will do nothing on macOS Editor.
"""
[[Methods.parameters]]
name = "enabled"
type = "bool"
summary = "Whether enable the scroll bar or not."

[[Methods]]
name = "SetVerticalScrollBarEnabled"
syntax = "SetVerticalScrollBarEnabled(bool enabled)"
returnType = "void"
summary = """
Sets whether the vertical scroll bar should show when the web content beyonds web view bounds.

This only works on mobile platforms. It will do nothing on macOS Editor.
"""
[[Methods.parameters]]
name = "enabled"
type = "bool"
summary = "Whether enable the scroll bar or not."

[[Methods]]
name = "SetBouncesEnabled"
syntax = "SetBouncesEnabled(bool enabled)"
returnType = "void"
summary = """
Sets whether the web view should show with a bounces effect when scrolling to page edge.

This only works on mobile platforms. It will do nothing on macOS Editor.
"""
[[Methods.parameters]]
name = "enabled"
type = "bool"
summary = "Whether enable the bounces effect should be applied or not."

[[Methods]]
name = "SetZoomEnabled"
syntax = "SetZoomEnabled(bool enabled)"
returnType = "void"
summary = "Sets whether the web view supports zoom guesture to change content size. Default is `false`, which means the zoom guesture is not supported."
[[Methods.parameters]]
name = "enabled"
type = "bool"
summary = "Whether the zoom guesture is allowed or not."

[[Methods]]
name = "AddPermissionTrustDomain"
syntax = "AddPermissionTrustDomain(string domain)"
returnType = "void"
summary = """
Adds a trusted domain to white list and allow permission requests from the domain.

You only need this on Android devices with system before 6.0 when a site needs the location or camera 
permission. It will allow the permission gets approved so you could access the corresponding devices.
From Android 6.0, the permission requests method is changed and this is not needed anymore.
"""
example = """
```csharp
webView.AddPermissionTrustDomain("my-own-site.com");
```
"""
notice = """This method is not the same to `AddSslExceptionDomain`, 
which is for bypassing SSL checking. You only need this method when 
you have trouble in granting users' permission. It is not needed on iOS.
"""
[[Methods.badges]]
name = "Android"
color = "green"
[[Methods.parameters]]
name = "domain"
type = "string"
summary = "The domain to add to the white list."

[[Methods]]
name = "RemovePermissionTrustDomain"
syntax = "RemovePermissionTrustDomain(string domain)"
returnType = "void"
summary = "Removes a trusted domain from white list."
[[Methods.badges]]
name = "Android"
color = "green"
[[Methods.parameters]]
name = "domain"
type = "string"
summary = "The domain to remove from white list."

[[Methods]]
name = "SetBackButtonEnabled"
syntax = "SetBackButtonEnabled(bool enabled)"
returnType = "void"
summary = """
Sets whether the device back button should be enabled to execute \"go back\" or \"closing\" operation.

On Android, the device back button in navigation bar will navigate users to a back page. If there is 
no any back page avaliable, the back button clicking will try to raise a `OnShouldClose` event and try 
to close the web view if `true` is return from the event. If the `OnShouldClose` is not listened, 
the web view will be closed and the UniWebView component will be destroyed to release using resource.

Listen to `OnKeyCodeReceived` if you need to disable the back button, but still want to get the back 
button key pressing event.

This method is only for Android. On iOS, you could show a toolbar with navigation and Done buttons for 
similar purpose.

Default is enabled.
"""
[[Methods.badges]]
name = "Android"
color = "green"
[[Methods.parameters]]
name = "enabled"
type = "bool"
summary = "Whether the back button should perform go back or closing operation to web view."

[[Methods]]
name = "SetUseWideViewPort"
syntax = "SetUseWideViewPort(bool flag)"
returnType = "void"
summary = """
Sets whether the web view should enable support for the \"viewport\" HTML meta tag or should use a wide viewport.

This method is only for Android. Default is disabled.
"""
[[Methods.badges]]
name = "Android"
color = "green"
[[Methods.parameters]]
name = "flag"
type = "bool"
summary = "Whether to enable support for the viewport meta tag."

[[Methods]]
name = "SetLoadWithOverviewMode"
syntax = "SetLoadWithOverviewMode(bool flag)"
returnType = "void"
summary = """
Sets whether the web view loads pages in overview mode, that is, zooms out the content to fit on screen by width.

This method is only for Android. Default is disabled.
"""
[[Methods.badges]]
name = "Android"
color = "green"
[[Methods.parameters]]
name = "flag"
type = "bool"
summary = "Whether to enable support for the overview mode."

[[Methods]]
name = "SetImmersiveModeEnabled"
syntax = "SetImmersiveModeEnabled(bool enabled)"
returnType = "void"
summary = """
Sets whether the web view should behave in immersive mode, that is, 
hides the status bar and navigation bar with a sticky style.

If disabled, the navigation bar will always show up while the web view is visible.

This method is only for Android. Default is enabled.
"""
[[Methods.badges]]
name = "Android"
color = "green"
[[Methods.parameters]]
name = "enabled"
type = "bool"
summary = "Whether to enable immersive mode when web view is showing up."

[[Methods]]
name = "SetShowToolbar"
syntax = "SetShowToolbar(bool show, bool animated, bool onTop, bool adjustInset)"
returnType = "void"
summary = """
Sets whether to show a toolbar which contains navigation buttons and Done button.

You could choose to show or hide the tool bar. By configuring the `animated` and `onTop` 
parameters, you can control the animating and position of the toolbar. If the toolbar is 
overlapping with some part of your web view, pass `adjustInset` with `true` to have the 
web view reloacating itself to avoid the overlap.

This method is only for iOS. The toolbar is hidden by default.
"""
example = """
```csharp
// Show a toolbar at top of screen with animation.
webView.SetShowToolbar(true, true, true);

// Hide the tool bar without animation. At the same time, make 
// the web view snap to screen top if there was overlapping between 
// the web view and toolbar.
webView.SetShowToolbar(false, false, true, true);
```
"""
[[Methods.badges]]
name = "iOS"
color = "orange"
[[Methods.parameters]]
name = "show"
type = "bool"
summary = "Whether the toolbar should show or hide."
[[Methods.parameters]]
name = "animated"
type = "bool"
summary = "Whether the toolbar state changing should be with animation. Default is `false`."
[[Methods.parameters]]
name = "opTop"
type = "bool"
summary = "Whether the toolbar should snap to top of screen or to bottom of screen. Default is `true`"
[[Methods.parameters]]
name = "adjustInset"
type = "bool"
summary = "Whether the toolbar transition should also afjust web view position and size if overlapped. Default is `false`"

[[Methods]]
name = "SetToolbarDoneButtonText"
syntax = "SetToolbarDoneButtonText(string text)"
returnType = "void"
summary = """
Sets the done button text in toolbar.

By default, UniWebView will show a "Done" button at bottom-right corner in the 
toolbar. You could change its title by passing a text.

This method is only for iOS, since there is no toolbar on Android.
"""
example = """
```csharp
webView.SetToolbarDoneButtonText("关闭");
```
"""
[[Methods.badges]]
name = "iOS"
color = "orange"
[[Methods.parameters]]
name = "text"
type = "string"
summary = "The text needed to be set as done button title."

[[Methods]]
name = "SetWebContentsDebuggingEnabled"
syntax = "SetWebContentsDebuggingEnabled(bool enabled)"
returnType = "void"
summary = """
Enables debugging of web contents. You could inspect of the content of a 
web view by using a browser development tool of Chrome for Android or Safari for macOS.

This method is only for Android and macOS Editor. On iOS, you do not need additional step. 
You could open Safari's developer tools to debug a web view on iOS.
"""
notice = """Due to a memory bug under WebKit and Unity, it might crash your macOS Editor when you stop playing with an inspector showing embeded in a web view. You could close the inspector first or use it as a standalone window to avoid this. It will only happen in editor and never affect real devices. 

Please remember to disable this in your product build. This should be only used while development.
"""
[[Methods.badges]]
name = "Android"
color = "green"
[[Methods.badges]]
name = "macOS"
color = "purple"
[[Methods.badges]]
name = "static"
color = "blue"
[[Methods.parameters]]
name = "enabled"
type = "bool"
summary = "Whether the content debugging should be enabled."

[[Methods]]
name = "SetWindowUserResizeEnabled"
syntax = "SetWindowUserResizeEnabled(bool enabled)"
returnType = "void"
summary = """
Enables user resizing for web view window. By default, you can only set the window size by setting its frame on mac Editor. 
By enabling user resizing, you would be able to resize the window by dragging its border as a normal macOS window.
"""
notice = "This method only works for macOS for debugging purpose. It does nothing on iOS and Android."
[[Methods.parameters]]
name = "enabled"
type = "bool"
summary = "Whether the window could be able to be resized by cursor."
[[Methods.badges]]
name = "macOS"
color = "purple"

[[Methods]]
name = "GetHTMLContent"
syntax = "GetHTMLContent(Action<string> handler)"
returnType = "void"
summary = "Gets the HTML content from current page by accessing its `outerHTML` with JavaScript."
example = """
```csharp
webView.GetHTMLContent((content)=>{
    print(content);
    // => "<html><head> ... </html>"
});
```
"""
[[Methods.parameters]]
name = "handler"
type = "Action<string>"
summary = "Called after the JavaScript executed. The parameter `string` is the content read from page."

[[Events]]
name = "OnPageStarted"
syntax = "OnPageStarted(UniWebView webView, string url)"
returnType = "event"
summary = """
Raised when the web view starts loading a url.

This event will be invoked for both url loading with `Load` method or by a link navigating from page.
"""
example = """
```csharp
webView.OnPageStarted += (view, url) => {
    print("Loading started for url: " + url);
};
webView.Load("https://example.com");

// => "Loading started for url: https://example.com/"
```
"""
[[Events.parameters]]
name = "webView"
type = "UniWebView"
summary = "The web view component which raises this event."
[[Events.parameters]]
name = "url"
type = "string"
summary = "The url which the web view begins to load."

[[Events]]
name = "OnPageFinished"
syntax = "OnPageFinished(UniWebView webView, int statusCode, string url)"
returnType = "event"
summary = """
Raised when the web view finished to load a url successully.

This method will be invoked when a valid response received from the url, regardless the response status.
If a url loading fails before reaching to the server and getting a response, `OnPageErrorReceived` will be 
raised instead.
"""
example = """
```csharp
webView.OnPageFinished += (view, statusCode, url) => {
    print(statusCode);
    print("Web view loading finished for: " + url);
};

webView.Load("https://example.com");
// => "202"
// => "Web view loading finished for: https://example.com"

webView.Load("https://some_domain.com/404");
// => "404"
// => "Web view loading finished for: https://example.com"
```
"""
[[Events.parameters]]
name = "webView"
type = "UniWebView"
summary = "The web view component which raises this event."
[[Events.parameters]]
name = "statusCode"
type = "int"
summary = "HTTP status code received from response."
[[Events.parameters]]
name = "url"
type = "string"
summary = "The url which the web view begins to load."

[[Events]]
name = "OnPageErrorReceived"
syntax = "OnPageErrorReceived(UniWebView webView, int errorCode, string errorMessage)"
returnType = "event"
summary = """
Raised when an error encountered during the loading process. 
Such as host not found or no Internet connection will raise this event.
"""
example = """
```csharp
webView.OnPageErrorReceived += (view, error, message) => {
    print("Errored.");
};

webView.Load("https://onevcat-not-existing.com/");
// => "Errored."

webView.Load("unknown://host?param1=value1&param2=value2");
// => "Errored."

webView.Load("https://self-signed.badssl.com");
// => "Errored."
```
"""
[[Events.parameters]]
name = "webView"
type = "UniWebView"
summary = "The web view component which raises this event."
[[Events.parameters]]
name = "errorCode"
type = "int"
summary = "The error code which indicates the error type. It is different from systems and platforms."
[[Events.parameters]]
name = "url"
type = "string"
summary = "The error message which indicates the error."

[[Events]]
name = "OnMessageReceived"
syntax = "OnMessageReceived(UniWebView webView, UniWebViewMessage message)"
returnType = "event"
summary = """
Raised when a message from web view is received. 

Generally, the message comes from a navigation to 
a scheme which is observed by current web view. You could use `AddUrlScheme` and 
`RemoveUrlScheme` to manipulate the scheme list.

"uniwebview://" scheme is default in the list, so a clicking on link starts with "uniwebview://"
will raise this event, if it is not removed.
"""
example = """
```csharp
webView.OnMessageReceived += (view, message) => {
    print(message.Scheme);
    print(message.Path);
    print(message.Args["param1"]);
    print(message.Args["param2"]);
}
webView.Load("uniwebview://host?param1=value1&param2=value2");
// => "uniwebview", "host", "value1", "value2"


anotherWebView.OnMessageReceived += (view, message) => {
    print(message.RawMessage);
}
anotherWebView.AddUrlScheme("myscheme");

// Clike the link "myscheme://action" in a web page.
// <a href="myscheme://action">Click Me</a>

// => "myscheme://action"
```
"""
[[Events.parameters]]
name = "webView"
type = "UniWebView"
summary = "The web view component which raises this event."
[[Events.parameters]]
name = "message"
type = "UniWebViewMessage"
summary = "The message object which contains information like message path and arguments."

[[Events]]
name = "OnShouldClose"
syntax = "OnShouldClose(UniWebView webView)"
returnType = "event bool"
summary = """
Raised when the web view is about to close itself.

This event is raised when the users close the web view by Back button on Android, Done button on iOS,
or Close button on Unity Editor. It gives a chance to make final decision whether the web view should 
be closed and destroyed. You should also clean all related resources you created (such as a reference to
the web view.)

If this event is not listened and implemented, the web view will be closed and destroyed by default when
it needed.
"""
returnValue = "Whether the web view should be closed and destroyed."
example = """
```csharp
// Clean webView field when 
public class MyBehaviour : MonoBehaviour {
    var webView;

    void Start() {
        webView = gameObject.AddComponent<UniWebView>();
        webView.OnShouldClose += (view) => {
            webView = null;
            return true;
        };
    }
}

// Make the web view there without being closed
webView.OnShouldClose += (view) => {
    return false;
};
```
"""
[[Events.parameters]]
name = "webView"
type = "UniWebView"
summary = "The web view component which raises this event."

[[Events]]
name = "OnKeyCodeReceived"
syntax = "OnKeyCodeReceived(UniWebView webView, int keyCode)"
returnType = "event"
summary = """
Raised when a key (like back button or volume up) on the device is pressed.

This event only raised on Android. It is useful when you disabled the back button but still need to 
get the back button event. On iOS, user's key action is not avaliable and this event will never be 
raised.
"""
example = """
```csharp
webView.OnKeyCodeReceived += (view, keyCode) => {
    if (keyCode == 4) {
        print("Back Button was clicked.");
    }
};
```
"""
[[Events.badges]]
name = "Android"
color = "green"
[[Events.parameters]]
name = "webView"
type = "UniWebView"
summary = "The web view component which raises this event."
[[Events.parameters]]
name = "keyCode"
type = "int"
summary = "The key code of pressed key. See [Android API for keycode](https://developer.android.com/reference/android/view/KeyEvent.html#KEYCODE_0) to know the possible values."

[[Events]]
name = "OnOreintationChanged"
syntax = "OnOreintationChanged(UniWebView webView, ScreenOrientation orientation)"
returnType = "event"
summary = """
Raised when the screen oreintation is changed. It is a good time to set the web view frame if you 
need to support multiple oreintations in your game.
"""
example = """
```csharp
// Keep the web view full screen on both portait and landscape mode.
webView.Frame = new Rect(0, 0, Screen.width, Screen.height);
webView.OnOreintationChanged += (view, orientation) => {
    webView.Frame = new Rect(0, 0, Screen.width, Screen.height);
};
```
"""
[[Events.parameters]]
name = "webView"
type = "UniWebView"
summary = "The web view component which raises this event."
[[Events.parameters]]
name = "orientation"
type = "ScreenOrientation"
summary = "The screen orientation for current state."