title = "UniWebViewSafeBrowsing"
file = "uniwebviewsafebrowsing"

summary = """
UniWebView Safe Browsing provides a way for browsing the web content in a more browser-like way, such as Safari on 
iOS and Chrome on Android.

This class wraps `SFSafariViewController` on iOS and “Custom Tabs” on Android. Starting with iOS 11, this component no 
longer shares cookies with Safari in the same way as it did in iOS 9 or 10, due to design restrictions by Apple that 
cannot be bypassed. It still supports auto-fill completion and other data sharing with the browser on the device. Most 
permissions are also built-in. You can use this class for tasks that are limited for a normal web view, such as using 
Apple Pay or Progressive Web Apps (PWA).

You create a `UniWebViewSafeBrowsing` instance by calling the static `UniWebViewSafeBrowsing.Create` method with a
destination URL. You cannot change this URL once the instance is created. To show the safe browsing, call `Show` on
the instance. The web content will be displayed in full screen with a toolbar containing the loaded URL, as well
as some basic controls like Go Back, Go Forward and Done. 

Browsing web content in `UniWebViewSafeBrowsing` is only supported on iOS and Android. There is no such component in
Unity Editor. Creating and showing a `UniWebViewSafeBrowsing` on Unity Editor will fall back to open the URL in 
external browser by using Unity's `Application.OpenURL`.
"""

[[Properties]]
name = "IsSafeBrowsingSupported"
returnType = "bool"
hasSetter = false
summary = """
Whether the safe browsing mode is supported in current runtime or not.

If supported, the safe browsing mode will be used when `Show` is called on a `UniWebViewSafeBrowsing` instance.
Otherwise, the system default browser will be used to open the page when `Show` is called.

This property always returns `true` on iOS runtime platform. On Android, it depends on whether there is an Intent 
can handle the safe browsing request. Usually this ability is provided by Chrome, but there are also other browser app
might implement that. If there is no Intent can open the URL in safe browsing mode, or the handling app is set to 
disabled in Android system, this property returns `false`.

To use this API on Android when you set your Target SDK to Android 11 or later, you need to add the correct 
intent query explicitly in your AndroidManifest.xml, to follow the Package Visibility 
(https://developer.android.com/about/versions/11/privacy/package-visibility). Add `queries` as a subnode of the 
`manifest` tag:

"""
example = """
```csharp
<manifest>
  // ...

  </application>

  <queries>
    <intent>
      <action android:name="android.support.customtabs.action.CustomTabsService" />
    </intent>
  </queries>
</manifest>

// To use it:
if (UniWebViewSafeBrowsing.IsSafeBrowsingSupported) {
    // Safe Browsing Mode is available on current device.
}
```
"""
[[Properties.badges]]
name = "static"
color = "blue"

[[Methods]]
name = "Create"
syntax = "Create(string url)"
returnType = "UniWebViewSafeBrowsing"
summary = """
Creates a new `UniWebViewSafeBrowsing` instance with a given URL.
"""
example = """
```csharp
var safeBrowsing = UniWebViewSafeBrowsing.Create("https://uniwebview.com");
```
"""
[[Methods.parameters]]
name = "url"
type = "string"
summary = """
The URL to navigate to. The URL must use the `http` or `https` scheme.
"""
[[Methods.badges]]
name = "static"
color = "blue"

[[Methods]]
name = "SetPreferredCustomTabsBrowsers"
syntax = "SetPreferredCustomTabsBrowsers(string[] packages)"
returnType = "void"
summary = """
Sets the preferred browsers for Custom Tabs in order of preference.

This allows developers to specify which browsers should be preferred when multiple Custom Tabs providers are available on the device. This setting affects both SafeBrowsing and AuthenticationSession functionality.

**Browser Selection Priority (Android):**
1. **User-defined preferred packages** (highest priority) - checked in order
2. **Default browser if it's Chromium-based** (Chrome, Edge, etc.)
3. **Default browser if it supports Custom Tabs** (even non-Chromium)
4. **Any Chromium-based browser** (only when no user preference is set)
5. **Any available Custom Tabs provider** (last resort)

This prioritization helps avoid browsers with incomplete Custom Tabs implementations (such as Firefox, which may not trigger `onNavigationEvent` callbacks properly).

On iOS, this method has no effect as Safari is always used for safe browsing.
"""
example = """
```csharp
// Set Chrome and Brave as preferred browsers
UniWebViewSafeBrowsing.SetPreferredCustomTabsBrowsers(new string[] {
    "com.android.chrome",
    "com.brave.browser"
});

var safeBrowsing = UniWebViewSafeBrowsing.Create("https://uniwebview.com");
safeBrowsing.Show();
```
"""
[[Methods.parameters]]
name = "packages"
type = "string[]"
summary = """
Array of browser package names in order of preference. Common package names include:
- "com.android.chrome" (Chrome)
- "com.brave.browser" (Brave Browser) 
- "com.opera.browser" (Opera Browser)
- "com.microsoft.emmx" (Microsoft Edge)
- "com.sec.android.app.sbrowser" (Samsung Internet)
"""
[[Methods.badges]]
name = "static"
color = "blue"
[[Methods.badges]]
name = "Android"
color = "green"

[[Methods]]
name = "Show"
syntax = "Show()"
returnType = "void"
summary = """
Shows the safe browsing content above current screen.
"""
example = """
```csharp
var safeBrowsing = UniWebViewSafeBrowsing.Create("https://uniwebview.com");
safeBrowsing.Show();
```
"""

[[Methods]]
name = "Dismiss"
syntax = "Dismiss()"
returnType = "void"
summary = """
Dismisses the safe browsing component.

This method only works on iOS. On Android, there is no way to dismiss the safe browsing component 
"""
[[Methods.badges]]
name = "iOS"
color = "orange"

[[Methods]]
name = "SetToolbarColor"
syntax = "SetToolbarColor(Color color)"
returnType = "void"
summary = """
Sets the color for toolbar background in the safe browsing component. 

The changes are ignored after `Show` method is called.
"""
example = """
```csharp
safeBrowsing.SetToolbarColor(Color.blue);
```
"""
[[Methods.parameters]]
name = "color"
type = "Color"
summary = """
The color to tint the toolbar.
"""

[[Methods]]
name = "SetColorScheme"
syntax = "SetColorScheme(ColorScheme colorScheme)"
returnType = "void"
summary = """
Sets the Custom Tabs UI color scheme. Ignored after `Show`.

Android only. This method does nothing on iOS.
"""
[[Methods.parameters]]
name = "colorScheme"
type = "ColorScheme"
summary = "The desired color scheme (`System`, `Light`, or `Dark`)."
[[Methods.badges]]
name = "Android"
color = "green"

[[Methods]]
name = "ChangeUrl"
syntax = "ChangeUrl(string url)"
returnType = "void"
summary = """
Changes the URL to be loaded before the tab is shown (useful for warmup/prefetch). Ignored after `Show`.

Android only. This method does nothing on iOS.
"""
[[Methods.parameters]]
name = "url"
type = "string"
summary = "The URL to switch to before calling `Show`."
[[Methods.badges]]
name = "Android"
color = "green"

[[Methods]]
name = "SetSecondaryToolbarColor"
syntax = "SetSecondaryToolbarColor(Color color)"
returnType = "void"
summary = """
Sets the secondary/bottom toolbar color. Ignored after `Show`.

Android only. This method does nothing on iOS.
"""
[[Methods.parameters]]
name = "color"
type = "Color"
summary = "Tint color for the secondary toolbar."
[[Methods.badges]]
name = "Android"
color = "green"

[[Methods]]
name = "SetNavigationBarColor"
syntax = "SetNavigationBarColor(Color color)"
returnType = "void"
summary = """
Sets the navigation bar color. Ignored after `Show`.

Android only. This method does nothing on iOS.
"""
[[Methods.parameters]]
name = "color"
type = "Color"
summary = "Tint color for the navigation bar."
[[Methods.badges]]
name = "Android"
color = "green"

[[Methods]]
name = "SetNavigationBarDividerColor"
syntax = "SetNavigationBarDividerColor(Color color)"
returnType = "void"
summary = """
Sets the navigation bar divider color. Ignored after `Show`.

Android only. This method does nothing on iOS.
"""
[[Methods.parameters]]
name = "color"
type = "Color"
summary = "Tint color for the divider."
[[Methods.badges]]
name = "Android"
color = "green"

[[Methods]]
name = "SetToolbarCornerRadiusDp"
syntax = "SetToolbarCornerRadiusDp(int cornerRadiusDp)"
returnType = "void"
summary = """
Sets the toolbar corner radius in dp for partial Custom Tabs. Ignored after `Show`.

Android only. This method does nothing on iOS.
"""
[[Methods.parameters]]
name = "cornerRadiusDp"
type = "int"
summary = "Corner radius in density-independent pixels."
[[Methods.badges]]
name = "Android"
color = "green"

[[Methods]]
name = "SetInitialHeightPx"
syntax = "SetInitialHeightPx(int initialHeightPx, ActivityHeightResizeBehavior resizeBehavior = ActivityHeightResizeBehavior.Fixed)"
returnType = "void"
summary = """
Sets initial Custom Tab height in pixels for partial tabs and chooses how the sheet can resize. Ignored after `Show`.

Android only. This method does nothing on iOS.
"""
[[Methods.parameters]]
name = "initialHeightPx"
type = "int"
summary = "Initial height in pixels."
[[Methods.parameters]]
name = "resizeBehavior"
type = "ActivityHeightResizeBehavior"
summary = "Resize behavior (`Default`, `Resizable`, or `Fixed`). Defaults to `Fixed`."
[[Methods.badges]]
name = "Android"
color = "green"

[[Methods]]
name = "SetInitialWidthPx"
syntax = "SetInitialWidthPx(int initialWidthPx)"
returnType = "void"
summary = """
Sets initial Custom Tab width in pixels (side sheet). Ignored after `Show`.

Android only. Requires AndroidX Browser 1.8.0+. This method does nothing on iOS.
"""
[[Methods.parameters]]
name = "initialWidthPx"
type = "int"
summary = "Initial width in pixels."
[[Methods.badges]]
name = "Android"
color = "green"

[[Methods]]
name = "SetShareMenuItemEnabled"
syntax = "SetShareMenuItemEnabled(bool enable)"
returnType = "void"
summary = """
Enables or disables share menu items. Ignored after `Show`.

Android only. This method does nothing on iOS.
"""
[[Methods.parameters]]
name = "enable"
type = "bool"
summary = "Whether sharing buttons are enabled."
[[Methods.badges]]
name = "Android"
color = "green"

[[Methods]]
name = "SetUrlBarHidingEnabled"
syntax = "SetUrlBarHidingEnabled(bool enable)"
returnType = "void"
summary = """
Enables hiding the URL bar on scroll. Ignored after `Show`.

Android only. This method does nothing on iOS.
"""
[[Methods.parameters]]
name = "enable"
type = "bool"
summary = "Whether the URL bar hides when scrolling."
[[Methods.badges]]
name = "Android"
color = "green"

[[Methods]]
name = "SetSendToExternalDefaultHandlerEnabled"
syntax = "SetSendToExternalDefaultHandlerEnabled(bool enable)"
returnType = "void"
summary = """
Sends redirects to the system default handler when enabled. Ignored after `Show`.

Android only. Requires AndroidX Browser 1.7.0+. This method does nothing on iOS.
"""
[[Methods.parameters]]
name = "enable"
type = "bool"
summary = "Allow redirects to be handled externally."
[[Methods.badges]]
name = "Android"
color = "green"

[[Methods]]
name = "SetMaximizationEnabled"
syntax = "SetMaximizationEnabled(bool enable)"
returnType = "void"
summary = """
Toggles side-sheet maximization for partial Custom Tabs. Ignored after `Show`.

Android only. Requires AndroidX Browser 1.8.0+. This method does nothing on iOS.
"""
[[Methods.parameters]]
name = "enable"
type = "bool"
summary = "Whether the maximization button is enabled."
[[Methods.badges]]
name = "Android"
color = "green"

[[Methods]]
name = "SetDownloadButtonEnabled"
syntax = "SetDownloadButtonEnabled(bool enable)"
returnType = "void"
summary = """
Enables or disables the download button in the overflow menu. Ignored after `Show`.

Android only. Requires AndroidX Browser 1.7.0+. This method does nothing on iOS.
"""
[[Methods.parameters]]
name = "enable"
type = "bool"
summary = "Enable download button in overflow."
[[Methods.badges]]
name = "Android"
color = "green"

[[Methods]]
name = "SetBookmarksButtonEnabled"
syntax = "SetBookmarksButtonEnabled(bool enable)"
returnType = "void"
summary = """
Enables or disables the bookmarks button in the overflow menu. Ignored after `Show`.

Android only. Requires AndroidX Browser 1.7.0+. This method does nothing on iOS.
"""
[[Methods.parameters]]
name = "enable"
type = "bool"
summary = "Enable bookmarks button in overflow."
[[Methods.badges]]
name = "Android"
color = "green"

[[Methods]]
name = "SetBackgroundInteractionEnabled"
syntax = "SetBackgroundInteractionEnabled(bool enable)"
returnType = "void"
summary = """
Allows interaction with background apps when a partial Custom Tab is shown. Ignored after `Show`.

Android only. Requires AndroidX Browser 1.7.0+. This method does nothing on iOS.
"""
[[Methods.parameters]]
name = "enable"
type = "bool"
summary = "Allow background interaction while partial tab is visible."
[[Methods.badges]]
name = "Android"
color = "green"

[[Methods]]
name = "SetWarmup"
syntax = "SetWarmup(bool enable)"
returnType = "void"
summary = """
Warms up the Custom Tabs provider process to speed up later loads. Can be called multiple times. Ignored after `Show`.

Android only. This method does nothing on iOS.
"""
[[Methods.parameters]]
name = "enable"
type = "bool"
summary = "Whether to warm up the provider."
[[Methods.badges]]
name = "Android"
color = "green"

[[Methods]]
name = "SetPrefetch"
syntax = "SetPrefetch(bool enable, string alternativeUrl = null)"
returnType = "void"
summary = """
Uses Custom Tabs prefetch (`mayLaunchUrl`) before showing the tab. Ignored after `Show`.

Android only. This method does nothing on iOS.
"""
[[Methods.parameters]]
name = "enable"
type = "bool"
summary = "Enable or disable prefetch."
[[Methods.parameters]]
name = "alternativeUrl"
type = "string"
summary = "Optional URL to prefetch instead of the current one."
[[Methods.badges]]
name = "Android"
color = "green"

[[Methods]]
name = "SetToolbarItemColor"
syntax = "SetToolbarItemColor(Color color)"
returnType = "void"
summary = """
Sets the color for toolbar controls in the safe browsing component. 

The changes are ignored after `Show` method is called.

This method only works on iOS. On Android, the controls color is determined by system to keep a reasonable 
contrast, based on the toolbar background color you provided in `SetToolbarColor`.
"""
example = """
```csharp
safeBrowsing.SetToolbarItemColor(Color.yellow);
```
"""
[[Methods.parameters]]
name = "color"
type = "Color"
summary = """
The color to tint the controls on toolbar.
"""
[[Methods.badges]]
name = "iOS"
color = "orange"

[[Events]]
name = "OnSafeBrowsingFinished"
syntax = "OnSafeBrowsingFinished(UniWebViewSafeBrowsing browsing)"
returnType = "event"
summary = """
Raised when user dismisses safe browsing by tapping the Done button or Back button.

The dismissed safe browsing instance will be invalid after this event being raised, and you should not use 
it for another browsing purpose. Instead, create a new one for a new browsing session.
"""
notice = """
This event will not happen in Unity Editor, because the whole `UniWebViewSafeBrowsing` will fall back to an 
external browser.
"""
example = """
```csharp
safeBrowsing.OnSafeBrowsingFinished += (browsing) => { 
    Debug.Log("UniWebViewSafeBrowsing closed.");
};
```
"""
[[Events.parameters]]
name = "browsing"
type = "UniWebViewSafeBrowsing"
summary = "The `UniWebViewSafeBrowsing` object raised this event."

[[Events]]
name = "OnSafeBrowsingClosed"
syntax = "OnSafeBrowsingClosed(UniWebViewSafeBrowsing browsing, UniWebViewSafeBrowsingEventMetadata metadata)"
returnType = "event"
summary = """
Raised together with `OnSafeBrowsingFinished`, but includes the metadata payload from the native safe browsing component.
"""
example = """
```csharp
safeBrowsing.OnSafeBrowsingClosed += (browsing, metadata) => {
    Debug.Log($"Safe Browsing closed at {metadata.TimestampUtc} from {metadata.Source}");
};
```
"""
[[Events.parameters]]
name = "browsing"
type = "UniWebViewSafeBrowsing"
summary = "The `UniWebViewSafeBrowsing` object raised this event."
[[Events.parameters]]
name = "metadata"
type = "UniWebViewSafeBrowsingEventMetadata"
summary = "Structured metadata describing the native callback (timestamp, native source)."

[[Events]]
name = "OnSafeBrowsingNavigationStarted"
syntax = "OnSafeBrowsingNavigationStarted(UniWebViewSafeBrowsing browsing, UniWebViewSafeBrowsingEventMetadata metadata)"
returnType = "event"
summary = "Raised when the underlying browser starts loading a page in Safe Browsing mode."
notice = "This event is not raised on iOS/macOS because Safari does not expose a navigation-start callback."
example = """
```csharp
safeBrowsing.OnSafeBrowsingNavigationStarted += (browsing, metadata) => {
    Debug.Log($"Navigation started at {metadata.TimestampUtc}");
};
```
"""
[[Events.parameters]]
name = "browsing"
type = "UniWebViewSafeBrowsing"
summary = "The `UniWebViewSafeBrowsing` object raised this event."
[[Events.parameters]]
name = "metadata"
type = "UniWebViewSafeBrowsingEventMetadata"
summary = "Structured metadata describing the native callback."

[[Events]]
name = "OnSafeBrowsingNavigationFinished"
syntax = "OnSafeBrowsingNavigationFinished(UniWebViewSafeBrowsing browsing, UniWebViewSafeBrowsingEventMetadata metadata)"
returnType = "event"
summary = "Raised when the Safe Browsing page finishes loading successfully."
example = """
```csharp
safeBrowsing.OnSafeBrowsingNavigationFinished += (browsing, metadata) => {
    Debug.Log($"Navigation finished at {metadata.TimestampUtc}");
};
```
"""
[[Events.parameters]]
name = "browsing"
type = "UniWebViewSafeBrowsing"
summary = "The `UniWebViewSafeBrowsing` object raised this event."
[[Events.parameters]]
name = "metadata"
type = "UniWebViewSafeBrowsingEventMetadata"
summary = "Structured metadata describing the native callback."

[[Events]]
name = "OnSafeBrowsingNavigationFailed"
syntax = "OnSafeBrowsingNavigationFailed(UniWebViewSafeBrowsing browsing, UniWebViewSafeBrowsingEventMetadata metadata)"
returnType = "event"
summary = "Raised when the Safe Browsing page fails to load."
example = """
```csharp
safeBrowsing.OnSafeBrowsingNavigationFailed += (browsing, metadata) => {
    Debug.Log($"Safe Browsing error reported at {metadata.TimestampUtc}");
};
```
"""
[[Events.parameters]]
name = "browsing"
type = "UniWebViewSafeBrowsing"
summary = "The `UniWebViewSafeBrowsing` object raised this event."
[[Events.parameters]]
name = "metadata"
type = "UniWebViewSafeBrowsingEventMetadata"
summary = "Structured metadata describing the native callback."
